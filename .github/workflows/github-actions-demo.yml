name: learn-github-actions                                            # å·¥ä½œæµçš„åç§°
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€       # æ¯ä¸€æ¬¡æ‰§è¡Œå·¥ä½œæµçš„ä»»åŠ¡åç§°
on:                                                                   # è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼Œç›®å‰è®¾ç½®ä¸ºæäº¤åˆ°mainåˆ†æ”¯çš„æ“ä½œå°†ä¼šè§¦å‘
  push:
    branches:
      - main
jobs:
  install_cjson:                    # ç¬¬ä¸€ä¸ªä½œä¸šçš„æ ‡è®°ï¼Œè¿™ä¸ªç”¨åœ¨å½“å‰æ–‡ä»¶ä¸­
    name: install cJSON             # è®¾ç½®ä½œä¸šçš„åç§°ï¼Œè¿™ä¸ªæ˜¾ç¤ºåœ¨é¡µé¢ä¸­
    runs-on: ubuntu-latest          # åœ¨æŒ‡å®šçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œä½œä¸š
    steps:                          # ä¸ºå½“å‰ä½œä¸šè®¾ç½®ä¸€ç³»åˆ—çš„ä»»åŠ¡
      - run: apt install -y cjson   # ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„shellå‘½ä»¤
      - shell: bash                 # æŒ‡å®šshellçš„ç±»å‹
  build_readfromcjson:
    needs: install_cjson            # å¿…é¡»æ‰§è¡Œå®Œinstall_cjsonä¹‹åå†æ‰§è¡Œå½“å‰ä½œä¸šï¼Œå³å½“å‰ä½œä¸šä¾èµ–äºâ€œinstall_cjsonâ€ä½œä¸š
    name: build readFromCjson
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3   # usesè¡¨ç¤ºä½¿ç”¨æŸä¸€ç§æ“ä½œï¼Œæ“ä½œæ˜¯ä¸€ç§å¯é‡å¤ä½¿ç”¨çš„ä»£ç å•ä½ã€‚actions/checkout@v3ç”±githubå®˜æ–¹æä¾›çš„æ“ä½œï¼Œä½œç”¨æ˜¯æ‹‰å–å½“å‰ä»“åº“çš„ä»£ç åˆ°æ‰§è¡Œä½œä¸šçš„æœºå™¨ä¸­
      - run: make
      - run: ./readfromjson
